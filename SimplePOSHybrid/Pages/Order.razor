@page "/order/{jsonStringPrcd}"
@layout MainLayout
@using SimplePOSHybrid.Data
@using SimplePOSHybrid.Models.PartnerMenu
@using SimplePOSHybrid.Components
@inject IDialogService DialogService

<MudLayout>
    <MudAppBar Style="background-color:#053B71;color:white" Fixed="false" Dense="false" DisableGutters="false" Class="pa-0">
        <MudIconButton Icon="@Icons.Material.Filled.Menu" Color="Color.Inherit" Edge="Edge.Start" />
        <MudText Class="ml-4" Style="font-weight:800;font-size:large">BLX Super Mart</MudText>
        <MudSpacer />
        <MudIconButton Icon="@Icons.Material.Filled.Logout" Style="color:white" Href="/" />
    </MudAppBar>
    <MudMainContent Class="pa-0">
        <MudContainer>
            <MudGrid Class="pt-3">
                <MudItem xs="5">

                    <MudGrid>
                        <MudItem xs="2" Class="pa-0"></MudItem>
                        <MudItem xs="6" Class="mt-2 pt-0">
                            <MudSelect Dense="true" Margin="Margin.Dense" T="string" Label="Order Type" Variant="Variant.Outlined">
                                <MudSelectItem Value="@("Credit")" />
                                <MudSelectItem Value="@("Debit")" />
                            </MudSelect>
                        </MudItem>
                        <MudItem xs="1" Class="mt-2 pt-0">
                            <MudIconButton Icon="@Icons.Material.Filled.PersonAddAlt1" OnClick="OpenRegUser" aria-label="add user"></MudIconButton>
                        </MudItem>
                        <MudItem xs="3" Class="mt-2 pt-0">
                            <MudIconButton Icon="@Icons.Material.Filled.KeyboardArrowDown" OnClick="OpenExtUsers" aria-label="users"></MudIconButton>
                        </MudItem>
                        <MudItem xs="12" Class="pt-0">
                            <div id="unique_id_scroll_section" class="ma-0" style="height:200px;overflow: auto">
                                <MudDataGrid Items="@test" Hover="true" Striped="true" Dense="true">
                                    <Columns>
                                        <Column T="Menuitemlist" StickyLeft="true">
                                            <CellTemplate>
                                                <MudIconButton OnClick="@RemoveItem" Color="@Color.Default" Icon="@Icons.Material.Filled.Delete" />
                                            </CellTemplate>
                                        </Column>
                                        <Column T="Menuitemlist" Field="ItemName" Title="Name" />
                                        <Column T="Menuitemlist" Title="Qty" Style="width:10px" />
                                        <Column T="Menuitemlist" Field="OptionalSalesPrice" Title="Price" Style="width:10px" />
                                        <Column T="Menuitemlist" Title="Total" Style="width:10px" />
                                    </Columns>
                                </MudDataGrid>
                            </div>
                        </MudItem>
                        <MudItem xs="12" Class="pr-0 pl-0 pb-0">
                            <MudPaper Class="pa-8 ma-0" Outlined="true" Elevation="3" Style="background-color:#e6e6e6;border:none"></MudPaper>
                        </MudItem>
                        <MudItem xs="12">
                            <MudGrid Class="pr-2 pl-2 pt-0 pb-0">
                                <MudItem xs="3" Class="d-flex align-center justify-center py-4">
                                    <MudIconButton Icon="@Icons.Material.Filled.Reply" DisableElevation="true" Variant="Variant.Filled" Style="background-color:#0866c4;color:white" Size="Size.Large" />
                                </MudItem>
                                <MudItem xs="3" Class="d-flex align-center justify-center py-4">
                                    <MudIconButton Icon="@Icons.Material.Filled.Percent" DisableElevation="true" Variant="Variant.Filled" Style="background-color:#0866c4;color:white" Size="Size.Large" />
                                </MudItem>
                                <MudItem xs="3" Class="d-flex align-center justify-center py-4">
                                    <MudIconButton Icon="@Icons.Material.Filled.Autorenew" DisableElevation="true" Variant="Variant.Filled" Style="background-color:#0866c4;color:white" Size="Size.Large" />
                                </MudItem>
                                <MudItem xs="3" Class="d-flex align-center justify-center py-4">
                                    <MudIconButton Icon="@Icons.Material.Filled.ReceiptLong" DisableElevation="true" Variant="Variant.Filled" Style="background-color:#0866c4;color:white" Size="Size.Large" />
                                </MudItem>
                            </MudGrid>
                        </MudItem>
                        <MudItem xs="12" Class="pa-0">
                            <MudGrid>
                                <MudItem xs="6" Class="d-flex align-center justify-center">
                                    <MudButton Variant="Variant.Filled" DisableElevation="true" Class="py-4" Style="font-weight:bold; background-color:#053B71;color:white">Hold Sale</MudButton>
                                </MudItem>
                                <MudItem xs="6" Class="d-flex align-center justify-center">
                                    @*<MudButton Variant="Variant.Filled" DisableElevation="true" OnClick="PrcdBtnClick" Class="py-4" Style="font-weight:bold; background-color:#053B71;color:white">Proceed</MudButton>*@
                                </MudItem>
                            </MudGrid>
                        </MudItem>
                    </MudGrid>
                </MudItem>
                <MudItem xs="7">

                </MudItem>


            </MudGrid>

        </MudContainer>
    </MudMainContent>


</MudLayout>

@code {

    private IEnumerable<Menuitemlist> test = new List<Menuitemlist>();

    [Parameter]
    public string jsonStringPrcd { get; set; }


    public IEnumerable<Menuitemlist> Elements { get; set; }

    protected override void OnParametersSet()
    {
        var qw = jsonStringPrcd;
        Console.WriteLine(qw);
        //the param will be set now
        //Elements = orderitems.AsEnumerable();
        //test = Elements;
    }


    private void OpenExtUsers()
    {
        DialogService.Show<Dialog>("Choose Customer");
    }

    private void OpenRegUser()
    {
        DialogOptions closeOnEscapeKey = new DialogOptions() { CloseOnEscapeKey = true };

        DialogService.Show<RegUser>("Add Customer", closeOnEscapeKey);
    }

    void RemoveItem()
    {
        //orderitems.RemoveAt(0);
        StateHasChanged();
    }

}