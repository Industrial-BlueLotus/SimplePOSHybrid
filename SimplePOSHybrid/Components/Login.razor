@layout LoginLayout
@page "/home"
@using SimplePOSHybrid.Data
@using SimplePOSHybrid.Models
@inject LoginMethods ILoginService
@inject NavigationManager Navigation




<MudGrid Style="width:100%;height:100%">
    <MudItem xs="12" Class="d-flex align-center justify-center mr-2 ml-2 mt-2">
        <MudImage Src="./Img/logo.jpeg"  Width="150" Height="150" Alt="logo" Elevation="25" Class="rounded-lg" Style="box-shadow:none"    />
    </MudItem>
    <MudItem xs="12" Class="d-flex align-center justify-center pl-16 pr-16 mr-16 ml-16 ">
        <MudTextField @bind-Value="loginModel.UserName" Label="User Name" Variant="Variant.Outlined" Margin="Margin.Dense"></MudTextField>
    </MudItem>
    <MudItem xs="12" Class="d-flex align-center justify-center pl-16 pr-16 mr-16 ml-16 ">
        <MudTextField @bind-Value="loginModel.Password" Label="Password" Variant="Variant.Outlined" 
            InputType="@PasswordInput" Adornment="Adornment.End" AdornmentIcon="@PasswordInputIcon"
                      OnAdornmentClick="ButtonTestclick" AdornmentAriaLabel="Show Password" Margin="Margin.Dense" />
    </MudItem>
    <MudItem xs="12" Class="d-flex align-center justify-center pl-16 pr-16 mr-16 ml-16  ">
        <MudTextField @bind-Value="Environmentname" Label="Environment Name" Variant="Variant.Outlined" Margin="Margin.Dense" ></MudTextField>
    </MudItem>
    <MudItem xs="12" Class="d-flex align-center justify-center pl-16 pr-16 mr-16 ml-16 ">
        <MudButton Variant="Variant.Filled" OnClick="LgnBtnClick" Style="background-color:#02198B;color:white;width:120px;height:45px;font-size:larger;border-radius:10px">
           Login
        </MudButton>
    </MudItem>
    <MudItem xs="12" Class="d-flex align-center justify-center pl-16 pr-16 mr-16 ml-16 ">
        <MudImage Src="./Img/banner.jpeg" Width="200" Height="50" Alt="logo" Elevation="25" Class="rounded-lg ma-4" Style="box-shadow:none" />
    </MudItem>
</MudGrid>



@code {



    public string Environmentname { get; set; }

    LoginObj loginModel = new();

    bool isShow;
    InputType PasswordInput = InputType.Password;
    string PasswordInputIcon = Icons.Material.Filled.VisibilityOff;

   
    public async void LgnBtnClick()
    {

        var response1 = await ILoginService.Authenticate(loginModel);
        
        if (!string.IsNullOrWhiteSpace(response1))
        {
            Navigation.NavigateTo("home");

        }
        else
        {
            await App.Current.MainPage.DisplayAlert("Oops","Invalid username or Password","Cancel");
        }

      
    }

    void ButtonTestclick()
    {
        @if (isShow)
        {
            isShow = false;
            PasswordInputIcon = Icons.Material.Filled.VisibilityOff;
            PasswordInput = InputType.Password;
        }
        else
        {
            isShow = true;
            PasswordInputIcon = Icons.Material.Filled.Visibility;
            PasswordInput = InputType.Text;
        }
    }


}
